{"ast":null,"code":"export default {\n  name: \"Login\",\n\n  data() {\n    return {\n      loginForm: {\n        username: \"\",\n        password: \"\",\n        errMsg: \"\"\n      }\n    };\n  },\n\n  methods: {\n    submitForm() {\n      const userAccount = this.loginForm.username;\n      const userPassword = this.loginForm.password;\n      this.check();\n\n      if (!userAccount) {\n        return this.$message({\n          type: \"error\",\n          message: \"账号不能为空！\"\n        });\n      }\n\n      if (!userPassword) {\n        return this.$message({\n          type: \"error\",\n          message: \"密码不能为空！\"\n        });\n      }\n\n      if (this.loginForm.errMsg) {\n        return this.$message({\n          type: \"error\",\n          message: this.loginForm.errMsg\n        });\n      }\n    },\n\n    check() {\n      const data = {\n        username: this.loginForm.username,\n        password: this.loginForm.password\n      };\n      fetch('api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(response => response.json()).then(res => {\n        if (res.errMsg) {\n          this.loginForm.errMsg = res.errMsg;\n        } else {\n          this.$router.push('/mainInterface');\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAuDA,eAAe;EACbA,IAAI,EAAE,OADO;;EAEZC,IAAI,GAAE;IACL,OAAM;MACJC,SAAS,EAAC;QACRC,QAAQ,EAAC,EADD;QAERC,QAAQ,EAAC,EAFD;QAGRC,MAAM,EAAC;MAHC;IADN,CAAN;EAOF,CAVa;;EAWZC,OAAO,EAAC;IACPC,UAAU,GAAG;MACX,MAAMC,WAAU,GAAI,KAAKN,SAAL,CAAeC,QAAnC;MACA,MAAMM,YAAW,GAAI,KAAKP,SAAL,CAAeE,QAApC;MACA,KAAKM,KAAL;;MACA,IAAI,CAACF,WAAL,EAAkB;QAChB,OAAO,KAAKG,QAAL,CAAc;UACnBC,IAAI,EAAE,OADa;UAEnBC,OAAO,EAAE;QAFU,CAAd,CAAP;MAIF;;MACA,IAAI,CAACJ,YAAL,EAAmB;QACjB,OAAO,KAAKE,QAAL,CAAc;UACnBC,IAAI,EAAE,OADa;UAEnBC,OAAO,EAAE;QAFU,CAAd,CAAP;MAIF;;MACA,IAAG,KAAKX,SAAL,CAAeG,MAAlB,EAAyB;QACvB,OAAO,KAAKM,QAAL,CAAc;UACnBC,IAAI,EAAC,OADc;UAEnBC,OAAO,EAAC,KAAKX,SAAL,CAAeG;QAFJ,CAAd,CAAP;MAIF;IAGD,CAzBM;;IA0BPK,KAAK,GAAE;MACL,MAAMT,IAAI,GAAC;QACTE,QAAQ,EAAC,KAAKD,SAAL,CAAeC,QADf;QAETC,QAAQ,EAAC,KAAKF,SAAL,CAAeE;MAFf,CAAX;MAKAU,KAAK,CAAC,WAAD,EAAc;QACjBC,MAAM,EAAE,MADS;QAEjBC,OAAO,EAAE;UACP,gBAAgB;QADT,CAFQ;QAKjBC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAelB,IAAf;MALW,CAAd,CAAL,CAMGmB,IANH,CAMQC,QAAO,IAAKA,QAAQ,CAACC,IAAT,EANpB,EAMqCF,IANrC,CAM0CG,GAAE,IAAI;QAAC,IAAGA,GAAG,CAAClB,MAAP,EAAc;UAAC,KAAKH,SAAL,CAAeG,MAAf,GAAsBkB,GAAG,CAAClB,MAA1B;QAAiC,CAAhD,MAAoD;UAAC,KAAKmB,OAAL,CAAaC,IAAb,CAAkB,gBAAlB;QAAoC;MAAC,CAN3I;IAOF;;EAvCO;AAXI,CAAf","names":["name","data","loginForm","username","password","errMsg","methods","submitForm","userAccount","userPassword","check","$message","type","message","fetch","method","headers","body","JSON","stringify","then","response","json","res","$router","push"],"sourceRoot":"","sources":["/home/huzihao/rare-vue/src/views/login.vue"],"sourcesContent":["\n<template>\n  <div id=\"login\">\n    <el-form\n        :model=\"loginForm\"\n        ref=\"loginForm\"\n        label-width=\"80px\"\n        label-position=\"top\"\n    ><el-form-item label=\"用户名\" prop=\"account\" style=\"margin-top: 10px\">\n      <el-row>\n        <el-col :span=\"2\">\n          <span class=\"el-icon-s-custom\"></span>\n        </el-col>\n        <el-col :span=\"22\">\n          <el-input\n              class=\"inps\"\n              placeholder=\"请输入用户名\"\n              v-model=\"loginForm.username\"\n          >\n          </el-input>\n        </el-col>\n      </el-row>\n    </el-form-item>\n      <el-form-item label=\"密码\" prop=\"passWord\">\n        <el-row>\n          <el-col :span=\"2\">\n            <span class=\"el-icon-lock\"></span>\n          </el-col>\n          <el-col :span=\"22\">\n            <el-input\n                class=\"inps\"\n                type=\"password\"\n                placeholder=\"请输入密码\"\n                v-model=\"loginForm.password\"\n            ></el-input>\n          </el-col>\n        </el-row>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" round class=\"submitBtn\" @click=\"submitForm\"\n        >登录\n        </el-button>\n      </el-form-item>\n      <div class=\"unlogin\">\n        <router-link :to=\"{ path: '/forgetpwd' }\"> 忘记密码? </router-link>\n        |\n        <router-link :to=\"{ path: '/register' }\">\n          <a href=\"register.vue\" target=\"_blank\" >注册新账号</a>\n        </router-link>\n      </div>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Login\"\n  ,data(){\n    return{\n      loginForm:{\n        username:\"\",\n        password:\"\",\n        errMsg:\"\"\n      }\n    }\n  }\n  ,methods:{\n    submitForm() {\n      const userAccount = this.loginForm.username;\n      const userPassword = this.loginForm.password;\n      this.check();\n      if (!userAccount) {\n        return this.$message({\n          type: \"error\",\n          message: \"账号不能为空！\",\n        });\n      }\n      if (!userPassword) {\n        return this.$message({\n          type: \"error\",\n          message: \"密码不能为空！\",\n        });\n      }\n      if(this.loginForm.errMsg){\n        return this.$message({\n          type:\"error\",\n          message:this.loginForm.errMsg\n        })\n      }\n\n\n    },\n    check(){\n      const data={\n        username:this.loginForm.username,\n        password:this.loginForm.password\n      }\n\n      fetch('api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(data),\n      }).then(response => response.json()).then(res =>{if(res.errMsg){this.loginForm.errMsg=res.errMsg}else{this.$router.push('/mainInterface')}});\n    }\n  }\n}\n</script>\n\n<style scoped>\n#login {\n   border-radius: 10px;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%,-50%);\n   margin: 0px auto;\n   width: 350px;\n   padding: 30px 35px 15px 35px;\n   background: #fff;\n   border: 1px solid #eaeaea;\n   text-align: center;\n   box-shadow: 0 0 20px 2px rgba(0, 0, 0, 0.1);\n }\n\n</style>\n"]},"metadata":{},"sourceType":"module"}